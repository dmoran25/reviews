import streamlit as st

def calculate_new_rating(current_rating, total_reviews, target_rating):
    """
    Calculates the number of 5-star reviews needed to reach the target rating.
    """
    current_total = current_rating * total_reviews
    new_reviews_needed = 0

    while (current_total + (5 * new_reviews_needed)) / (total_reviews + new_reviews_needed) < target_rating:
        new_reviews_needed += 1

    return new_reviews_needed

def estimate_revenue_increase(new_reviews_needed, clv):
    """
    Estimates the additional revenue generated by acquiring the required number of 5-star reviews.
    Assumes each review gets ~1000 views per year and influences 5% of viewers.
    """
    estimated_revenue = new_reviews_needed * 1000 * 0.05 * clv
    return estimated_revenue

# Streamlit UI
st.title("📊 Google Reviews & Revenue Growth Calculator")

st.sidebar.header("Step 1: Input Your Business Data")
current_rating = st.sidebar.number_input("Current Google Rating", min_value=0.0, max_value=5.0, value=4.0, step=0.1)
total_reviews = st.sidebar.number_input("Current Number of Google Reviews", min_value=0, value=50, step=1)
target_rating = st.sidebar.number_input("Desired Google Rating", min_value=current_rating, max_value=5.0, value=4.8, step=0.1)
clv = st.sidebar.number_input("Customer Lifetime Value ($)", min_value=1, value=1000, step=10)

# Calculations
reviews_needed = calculate_new_rating(current_rating, total_reviews, target_rating)
revenue_increase = estimate_revenue_increase(reviews_needed, clv)

# Display results
st.subheader("🔍 Review Growth Insights")
st.write(f"⭐ **5-Star Reviews Needed to Reach {target_rating}:** {reviews_needed}")
st.write(f"💰 **Estimated Revenue Increase with {reviews_needed} More 5-Star Reviews:** ${revenue_increase:,.2f}")

st.markdown("---")
st.markdown("💡 *Improve your online presence and grow your business with better reviews!*")
